{% extends "base.html" %}

{% block title %}Home | Expense Splitter{% endblock %}

{% block content %}
  <h2 id="welcome">Welcome!</h2>
  <p>You are logged in.</p>
{% endblock %}

{% block scripts %}
<script type="module">
  import { supabase } from '/static/js/supabaseClient.js'

  // Display user's name if available
  const { data: { user } } = await supabase.auth.getUser()
  if (user && user.user_metadata && user.user_metadata.name) {
    document.getElementById('welcome').textContent = `Welcome, ${user.user_metadata.name}!`
  }

  // Logout functionality (if not already handled globally)
  const logoutBtn = document.createElement('button')
  logoutBtn.textContent = 'Logout'
  logoutBtn.style.cssText = 'background:none;border:none;color:var(--green);font-weight:bold;cursor:pointer;margin-left:16px;'
  logoutBtn.addEventListener('click', async () => {
    await supabase.auth.signOut()
    localStorage.removeItem('session')
    window.location.href = 'login.html'
  })
  document.querySelector('.topbar').appendChild(logoutBtn)
</script>
{% endblock %}
