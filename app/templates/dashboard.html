{% extends "base.html" %}

{% block title %}Dashboard - Expense Splitter{% endblock %}

{% block styles %}
<!-- If dashboard needs custom styles, add them here -->
<style>
  /* Wallet colors */
  .wallet.positive .amount { color: var(--green-600); }
  .wallet.negative .amount { color: var(--red); }

  /* Transactions */
  .tx-list { display:flex; flex-direction:column; gap:10px; }
  .tx {
    display:flex; justify-content:space-between; align-items:center;
    background:#fff; border:1px solid #eef2f7;
    border-radius:12px; padding:10px 12px;
  }
  .tx .left { display:flex; flex-direction:column; }
  .tx .name { font-weight:600; font-size:14.5px; }
  .tx .meta { font-size:.9rem; color:var(--muted); }
  .tx .amt { font-weight:700; font-size:14.5px; }
  .tx .amt.positive { color:var(--green-600); }
  .tx .amt.negative { color:var(--red); }

  /* Quick actions */
  .actions { display:flex; gap:10px; flex-wrap:wrap; }
  .btn {
    border:1px solid #e5e7eb; background:#fff; border-radius:12px;
    padding:9px 12px; text-decoration:none; color:var(--black);
    font-weight:600; box-shadow:var(--shadow); font-size:14px;
  }
  .btn:hover { border-color:#d1d5db; }
</style>
{% endblock %}

{% block content %}

<!-- Greeting + Wallet -->
<section class="panel-row grid-2" style="margin-bottom:16px;">
  <div class="panel">
    <h2>Welcome {{ user_name|default('User') }}!</h2>
    <p class="muted">Quick overview of your account.</p>
  </div>

  <div class="panel">
    <div class="wallet {{ balance_class|default('positive') }}">
      <div class="muted">Wallet Balance</div>
      <div class="amount">
        ${{ "%.2f"|format(wallet_balance|default(0.0)) }}
      </div>
      <div class="muted">
        {% if balance_class == 'negative' %}
          You owe money
        {% else %}
          You are owed money
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- Recent Transactions -->
<section class="panel" style="margin-bottom:16px;">
  <h2>Recent Transactions</h2>

  <div class="tx-list">
    {% if recent_tx and recent_tx|length > 0 %}
      {% for t in recent_tx[:2] %}
        <div class="tx">
          <div class="left">
            <div class="name">{{ t.name }}</div>
            <div class="meta">{{ t.date }} â€¢ {{ t.group }}</div>
          </div>
          <div class="amt {% if t.sign == '+' %}positive{% else %}negative{% endif %}">
            {{ t.sign }}${{ "%.2f"|format(t.amount) }}
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="muted">No recent transactions.</div>
    {% endif %}
  </div>
</section>

<!-- Quick Actions + Notifications -->
<section class="panel-row" style="margin-bottom:16px;">
  <div class="panel">
    <h2>Quick Actions</h2>
    <div class="actions">
      <a class="btn" href="#">+ Add Expense</a>
      <a class="btn" href="#">Settle Up</a>
      <a class="btn" href="#">Create Group</a>
    </div>
  </div>

  <div class="panel">
    <h2>Notifications</h2>
    <ul style="margin:0; padding-left:18px;">
      {% if notifications and notifications|length > 0 %}
        {% for note in notifications[:4] %}
          <li>{{ note }}</li>
        {% endfor %}
      {% else %}
        <li class="muted">No new notifications.</li>
      {% endif %}
    </ul>
  </div>
</section>

{% endblock %}

{% block scripts %}
<script>
  /* Highlight sidebar link */
  const link = document.querySelector('.nav a[href="/dashboard"]');
  if (link) link.classList.add("active");
</script>
{% endblock %}
