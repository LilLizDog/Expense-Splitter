{% extends "base.html" %}

{% block title %}Reset Password | Expense Splitter{% endblock %}

{% block styles %}
<style>
  .wrap{
    min-height:calc(100vh - 56px);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  .card{
    width:100%;
    max-width:520px;
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:28px;
  }
  h1{ margin:0 0 6px; font-size:1.5rem; }
  p.muted{ margin:0 12px 18px 0; color:var(--muted); font-size:.95rem; }
  label{ display:block; font-size:.92rem; margin:10px 0 6px; }
  input{ width:100%; padding:11px 12px; border:1px solid #e5e7eb; border-radius:10px; font-size:14px; }
  .btn{ width:100%; margin-top:18px; padding:12px; border-radius:12px; border:1px solid #e5e7eb; background:#fff; font-weight:700; cursor:pointer; box-shadow:var(--shadow); }
  .btn:hover{ border-color:#d1d5db; }
  .row{ display:grid; gap:12px; }
  .msg{ display:none; margin:8px 0; padding:8px; border-radius:6px; }
  .ok{ color:#155724; background:#d4edda; }
  .err{ color:#721c24; background:#f8d7da; }
  .alt{ margin-top:12px; font-size:.95rem; }
  .alt a{ text-decoration:none; color:var(--green-600); }
</style>
{% endblock %}

{% block content %}
<main class="wrap">
  <section class="card">
    <h1 id="title">Reset password</h1>
    <p class="muted" id="subtitle">Enter your email to receive a reset link.</p>

    <!-- status messages -->
    <div id="ok" class="msg ok"></div>
    <div id="err" class="msg err"></div>

    <!-- request form (no token yet) -->
    <form id="request-form" class="row" style="display:none;">
      <label for="email">Email</label>
      <input id="email" type="email" required/>
      <button class="btn" type="submit">Send reset link</button>
    </form>

    <!-- set-new-password form (after email link) -->
    <form id="set-form" class="row" style="display:none;">
      <label for="new_password">New password</label>
      <input id="new_password" type="password" minlength="8" required/>
      <label for="confirm_password">Confirm new password</label>
      <input id="confirm_password" type="password" minlength="8" required/>
      <button class="btn" type="submit">Update password</button>
    </form>

    <div class="alt"><a href="/login">Back to login</a></div>
  </section>
</main>
{% endblock %}

{% block scripts %}
<script type="module" src="/static/js/supabaseClient.js"></script>
<script type="module" src="/static/js/reset.js"></script>
{% endblock %}
